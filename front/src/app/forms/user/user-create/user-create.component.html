<h1 class="text-center">Form User</h1>

<form #form="ngForm" [formGroup]="userForm" class="row" (submit)="save()">
    <!-- NAME -->
    <app-input class="col-md-3">
        <div class="form-group">
            <label>Name</label>
            <input
                [ngClass]="{
                    'is-valid': userForm.get('name').valid,
                    'is-invalid': userForm.get('name').invalid && (form.submitted || userForm.get('name').touched)}"
                formControlName="name"
                type="text"
                placeholder="Name"
                class="form-control"
                autofocus>
            <app-message
                text="Name is required"
                *ngIf="userForm.get('name').errors?.required && (form.submitted || userForm.get('name').touched)">
            </app-message>
            <app-message
                text="maximun size 30"
                *ngIf="userForm.get('name').errors?.maxlength">
            </app-message>
            <app-message
                text="Name already taken"
                *ngIf="userForm.get('name').errors?.isTaken">
            </app-message>
        </div>
    </app-input>

    <!-- EMAIL -->
    <app-input class="col-md-5">
        <div class="form-group">
            <label>E-mail</label>
            <input
                [ngClass]="{
                    'is-valid': userForm.get('email').valid,
                    'is-invalid': userForm.get('email').invalid && (form.submitted || userForm.get('email').touched)}"
                formControlName="email"
                type="email"
                placeholder="E-mail"
                class="form-control">
            <app-message
                text="Email is required"
                *ngIf="userForm.get('email').errors?.required && (form.submitted || userForm.get('email').touched)">
            </app-message>
            <app-message
                text="Email is invalid"
                *ngIf="userForm.get('email').errors?.email && (form.submitted || userForm.get('email').touched)">
            </app-message>
            <app-message
                text="Email already taken"
                *ngIf="userForm.get('email').errors?.isTaken">
            </app-message>
        </div>
    </app-input>

    <!-- PASSWORD -->
    <app-input class="col-md-4">
        <div class="form-group">
            <label>Password</label>
            <input
                [ngClass]="{
                    'is-valid': userForm.get('password').valid,
                    'is-invalid': userForm.get('password').invalid && (form.submitted || userForm.get('password').touched)}"
                formControlName="password"
                type="password"
                placeholder="password"
                class="form-control">
            <app-message
                text="password is required"
                *ngIf="userForm.get('password').errors?.required && (form.submitted || userForm.get('password').touched)">
            </app-message>
            <app-message
                text="minimun size 9"
                *ngIf="userForm.get('password').errors?.minlength && (form.submitted || userForm.get('password').touched)">
            </app-message>
            <app-message
                text="first character up case"
                *ngIf="userForm.get('password').errors?.pattern">
            </app-message>
        </div>
    </app-input>

    <!-- birth -->
    <app-input class="col-md-4">
        <div class="form-group">
            <label>Birth</label>
            <input
                [ngClass]="{'is-invalid': userForm.get('birth').invalid && (form.submitted || userForm.get('birth').touched)}"
                formControlName="birth"
                type="date"
                placeholder="birth"
                class="form-control">
            <app-message
                text="Date is required"
                *ngIf="userForm.get('birth').errors?.required && (form.submitted || userForm.get('birth').touched)">
            </app-message>
            <app-message
                text="Only of legal age"
                *ngIf="userForm.get('birth').errors?.isOverAge">
            </app-message>
            <app-message
                text="Age limit 1900"
                *ngIf="userForm.get('birth').errors?.ageLimit">
            </app-message>
        </div>
    </app-input>

    <!-- PROFISSION -->
    <app-input class="col-md-8">
        <div class="form-group">
            <label>Profission</label>
            <input
                [ngClass]="{'is-invalid': userForm.get('profission').invalid && (form.submitted || userForm.get('profission').touched)}"
                formControlName="profission"
                type="text"
                placeholder="profission"
                class="form-control">
            <app-message
                text="profission is required"
                *ngIf="userForm.get('profission').errors?.required && (form.submitted || userForm.get('profission').touched)">
            </app-message>
            <app-message
                text="maximun size 30"
                *ngIf="userForm.get('profission').errors?.maxlength">
            </app-message>
        </div>
    </app-input>

    <!-- SEX -->
    <app-input  class="col-md-12">
        <div class="form-check form-check-inline">
            <input id="male" checked type="radio" class="form-check-input" name="sex" value='male' formControlName="sex">
            <label for="male" class="form-check-label mr-2">Male</label>

            <input id="female" type="radio" class="form-check-input" name="sex" value='female' formControlName="sex" >
            <label for="female" class="form-check-label mr-2">Female</label>

            <input id="others" type="radio" class="form-check-input" name="sex" value='others' formControlName="sex" >
            <label for="others" class="form-check-label mr-2">others</label>
        </div>
    </app-input>

    <button type="submit" class="btn btn-primary ml-3">Submit</button>
    <a [routerLink]="['/list']" class="btn btn-dark ml-3">back</a>
</form>
